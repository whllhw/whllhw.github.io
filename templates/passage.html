<html>
    <head>
        <meta charset="utf-8">
            <title>
                浏览文章
            </title>
        </meta>
        <link href="https://cdn.bootcss.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
         <link rel="stylesheet" href="{{ url_for('static',filename='css/jquery.dataTables.min.css') }}" type="text/css" />
            <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js">
            </script>
            <script src="https://cdn.bootcss.com/bootstrap/4.0.0/js/bootstrap.min.js">
            </script>
             <script src="{{ url_for('static',filename='js/jquery.dataTables.min.js') }}"></script>
        </link>
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col-md-2">

                </div>
                <div class="col-md-10">
                    <table class="table table-hover" id="datatable">
                        <thead>
                            <tr>
                                <th>编号</th>
                                <th>标题</th>
                                <!-- <th>作者</th> -->
                                <th>时间</th>
                                <th>内容</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for passage in passages %}
                            <tr>
                                <td>{{ passage.id }}</td>
                                <td>{{ passage.title }}</td>
                                <!-- <td>{{ passage.author_id }}</td> -->
                                <td>{{ passage.date }}</td>
                                <td>{{ passage.context[:15] }}</td>
                                <td></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </body>
    <script>
$(function(){
    var table = $('#datatable').DataTable({
    "columns": [
        {"data": "id"},
        {"data": "title"},
        //{"data": "author"},
        {"data": "date"},
        {"data": "context"},
        {
            "data": null,
            "defaultContent": '<button type="button" class="btn btn-info">编辑</button>'+
            '<button type="button" class="btn btn-danger">删除</button>'
        }
    ]
});
    $('#datatable tbody').on('click','button',function(){
    	let class_name = $(this).attr('class');
    	let data = table.row($(this).parents('tr')).data();
    	if(class_name == 'btn btn-info'){ // 编辑
    		window.location.href = "{{ url_for('edit',_external=true) }}/" + data['id'];
    	}else{ // 删除

    	}
    });
});
    </script>
</html>